%=========================================================================
% (c) Karel Hala, 2014 

\chapter{Úvod}
Pøi implementaci jakéholiv nástroje se èasto nará¾í na bariéru mezi zákazníkem a 
programátorem. Zákazník èasto netu¹í, co chce a programátor èasto zákazníka 
¹patnì pochopí. Tento nástroj bohu¾el tyto problémy nedoká¾e odstranit, nicménì 
by mìl napomoci odstranit nìkteré bariéry a zajistit sna¾¹í vizualizaci 
problémù.

Tento nástroj umo¾ní vìt¹í prùhlednost vývoje aplikací tím, ¾e zaruèí postupnou 
implementaci a vytváøení jednotlivých èástí. Tento nástroj dále zajistí popis 
chování tøíd pøes objektovì orientované Petriho sítí, co¾ vede k urychlení 
návrhu novì vytváøené aplikace a mo¾nosti prùbì¾ného testování aplikace bez 
nutnosti vytváøet a spou¹tìt zdrojový kód.

Tento editor by mìl být jednoduchý na pou¾ívání a snadný k pochopení. Pøevá¾nì 
je potøeba zajistit automatické vytváøení a editace pøi návrhu, kdy je 
nutné obstarat vytvoøení diagramu tøíd na základì diagramu pøípadù u¾ití a na 
diagram tøíd také navázat objektovì orientované Petriho sítì.

V kapitole \ref{konkurence} se nejdøíve podíváme na nástroje, které se 
zamìøují na podobné téma jako je tomu ve specifikaci pro tento nástroj. Tyto 
nástroje doká¾ou vizualizovat vyvíjený software pomocí rùzných grafù a 
diagramù. Rozebereme jejich pøednosti a jejich slabiny, poté si vybemere 
nìkteré jejich vlastnosti a vysvìtlíme pøípadné øe¹ení nedostatkù tìchto 
aplikací.

Navá¾eme kapitolou \ref{grafy}, kde vysvìtlíme druhy grafù, které 
se hodí pro implementaci námi zvolených èástí. Zamìøíme se na 
trojici diagramù \emph{Diagram pøipadù u¾ití}, \emph{Diagram tøíd} a 
\emph{Objektovì orientované Petriho sítì}. Provázání mezi tìmito 
diagramy poté vysvìtlíme v kapitole \ref{spojeni}.

V následující kapitole pøestavíme nástroj, který byl pøedmìtem této práce. 
Pøedvedeme jeho silné stránky, jakým zpùsobem byly vytvoøeny urèité èásti 
aplikace a také mírnì nastíníme ovládací prvky tohoto nástroje 
\ref{samotatnaAplikace}. Na toto volnì navá¾eme pøedstavením roz¹íøených 
mo¾ností tohoto nástroje v kapitole \ref{moznostiAplikace}.

Po vysvìtlení nástroje pøedstavíme jeho pou¾itelnost v praxi prezentací nìkolika 
mo¾ným budoucím u¾ivatelùm a jejich reakcí na tento nástroj. Popí¹eme jejich 
chování a pocity z aplikace \ref{testyAvysledky}.

Závìrem práce bude pøedstavení mo¾ných dal¹ích roz¹íøení tohoto nástroje. Také 
rozebemere momentální stav této aplikace, kde se zamìøíme na pøínos nástroje a 
zhodnotíme, zda je nástroj schopný udr¾et se v silné konkurenci rùzných editorù 
UML diagramù \ref{zaver}.

\chapter{Nástroje zamìøující se na podobné téma} \label{konkurence}
Z hlediska sna¾¹ího porozumìní vyvíjené aplikace bylo zvoleno nejdøíve 
prozkoumámí nástrojù, které se specifikují na podobné téma. Byly vybrány 
nástroje, co jsou jednoduché na pou¾ívání a hojnì vyu¾ívané v praxi. Z tohoto 
dùvodu byly prozkoumány dva nástroje -- \emph{Umbrello} a komerèní 
\emph{Enterprise Architect}. Detailnìj¹í popis jednotlivých aplikací, jejich 
výhod a nedostatkù, je popsán v sekci \ref{umbrello} a 
\ref{enterpriseArchitect}. Dále se zamìøíme na vyu¾itelné souèásti tìchto 
nástrojù v sekci \ref{vybraneSoucasti}.

\section{Umbrello} \label{umbrello}
Umbrello, celým názvem \emph{Umbrello UML Modeller} 
\footnote{Domovská stránka aplikace: \url{http://umbrello.kde.org/}}, je 
aplikace primárnì urèena pro Unix systémy, nicménì je mo¾né ji bez problémù 
nainstalovat také na Windows za pomoci KDE installeru a vybrání po¾adovaného 
balíèku \footnote{Ovládání tohoto installeru je velice 
jednoduché a intuitivní. Lze jej nalézt na: 
\url{http://windows.kde.org/download.php}.}. 

\subsection{Motivace}
Aplikace Umbrello je hojnì vyu¾ívána a chválena mezi u¾ivateli, z toho dùvodu 
byl tento nástroj vybrán jako první k prozkoumání. Také jednoduché pou¾ívání 
této aplikace bylo pøínosné pro analýzu po¾adavkù a porozumìní tìmto nástrojùm.

\subsection{Popis aplikace}
Aplikace je robustní a nabízí ¹iroké mo¾nosti úprav. Nástroj je 
volnì ke sta¾ení a pou¾ívání \footnote{Aplikace pou¾ívá licenci GNU general 
public license, co¾ 
umo¾òuje zapojení komunity do vývoje tohoto nástroje. Odkaz na licenci: 
\url{http://www.gnu.org/licenses/old-licenses/gpl-2.0.html} }. Umbrello 
poskytuje mnoho UML grafù a základní práce s touto aplikací je pomìrnì 
snadná, ale její jednoduchý design má nìkolik slabin. Pro men¹í aplikace 
a pro zaèínající firmy je naprosto dokonalá, ale absence pokroèilého 
editoru a ne pøíli¹ jednoduchá práce s editorem (jako napøíklad 
pøidání nové metody, zalomení èar a také vytvoøení jiného souboru) je ponìkud 
omezující. V dal¹í kapitole se tedy podíváme na výhody této aplikace a pouèíme 
se z pøípadných nedostatkù.

\subsection{Výhody a nevýhody}
Umbrello aplikace poskytuje nìkolik mo¾ností, jak popsat vývoj a návrh 
aplikace. Nabízí pøevá¾nì grafy a diagramy ze skupiny UML mezi které 
patøí:
\begin{itemize}
  \item \emph{ClassDiagram} pro popis tøíd a provázanosti mezi nimi.
  \item \emph{Sequence Diagram} pro 
popis chodu aplikace, komunikace mezi vlákny a komunikace mezi aplikacemi.
  \item \emph{Use Case Diagram} k popisu akcí v systému a aplikaci.
  \item \emph{State Diagram} pro popis 
stavu systému a prùbìhu jednotlivých operací, pøevá¾nì zachování v urèitých 
momentech aplikace na dané podmínky.
  \item \emph{Activity Diagram} popisuje akce a 
prùbìh celého programu graficky.
  \item \emph{Component Diagram} pro popis spojení a 
komunikace mezi jednotlivými komponentami.
  \item \emph{Deployment Diagram} popisuje 
fyzické ulo¾i¹tì a zaøízení, na kterých program bude pracovat.
  \item \emph{Entity Relationship Diagram} pro popis vztahu dat mezi sebou.
\end{itemize}

Mezi klady této aplikace patøí vìt¹í výbìr diagramù jak znázornit a zpøehlednit 
vývoj aplikace. Základní ovládání aplikace je intuitivní a design je pøehledný. 
Jako hlavní výhodu této aplikace lze uvést mo¾nost vytvoøení zdrojových kódù na 
základì vytvoøených diagramù a grafù. Je mo¾né také provést vytvoøení a úpravu 
zdrojových kódù pomocí nástroje Umbrello. Staèí pouze importovat jednu ji¾ 
vytvoøenou tøídu a Umbrello u¾ivatele provede jednoduchým nastavením a výbìrem, 
které tøídy namodelované v aplikaci, se mají vygenerovat a nabídne také mo¾nost 
mírnì upravit zvolený kód. Vzhledem k tomu, ¾e aplikace je plnì zdarma, je tato 
vlastnost velice pøínosná.

Umbrello dále poskytuje mo¾nost èásteèného vytvoøení dokumentace i v pøípadì, 
¾e nejsou poskytnuty komentáøe, na základì kterých by tato dokumentace mohla 
být vytvoøena. Pøi generování tøíd je mo¾né také importovat zdrojový kód a 
nechat Umbrello v¹e vygenerovat samo. Tato vlastnost je podporována pouze pro 
jazyky \texttt{ActionScript, Ada, C++, C\#, D IDL, Java, Javascript, MySQL}.

Mezi dal¹í výhody patøí mo¾nost exportování objektù jako PNG obrázky. Pøi 
psaní dokumentù je mo¾né vytvoøený diagram zkopírovat a vlo¾it pøímo do 
dokumentu. Pro export do formátu PNG je mo¾né vybrat èást diagramu, nebo celou 
sí». S touto mo¾ností také pøichází mo¾nost tisku celého diagramu. 
\cite{umbrelloDocumentation}

\subsection{Zhodnocení aplikace Umbrello}
Základní práce s aplikací je jednoduchá a intuitivní, nicménì dlouhodobìj¹í 
práce je pomalá a pøíli¹ opakující se. Nutnost vytvoøení objektu na 
editaèním plátnì a poté výbìru nástroje pro pøesun a editaci daného objektu je 
zdlouhavá a ¹patná. Jednodu¹¹í by pro práci jistì bylo vytvoøení objektu a 
po kliknutí na ji¾ vytvoøený objekt jej pouze pøesunout. Vytvoøení nového 
atributu tøídy je opìt velice nároèné a neintuitivní. Takté¾ nemo¾nost zalomení 
spojù mezi objekty je limitující, a¾ takøka neproveditelné.

\section{Enterprise Architect} \label{enterpriseArchitect}
S ohlédnutím na aplikaci Umbrello a nìkteré její nedostatky, bylo nutné pro 
pozdìj¹í vývoj nástroje prozkoumat dal¹í aplikaci. Tato aplikace se jmenuje 
\emph{Enterprise Architect} a je tvoøena firmou \emph{Sparx Systems} 
\footnote{\url{http://www.sparxsystems.com}}. Tato firma se soustøeïuje na 
vývoj nástrojù pro tvorbu UML grafù. Firmou nabízené produkty jsou 
placené, ale u¾ivatel obdr¾í opravdu robustní systémy pro tvorbu UML grafù a 
mo¾nost úpravy a editace zdrojových kódù pro nìkolik jazykù.

\subsection{Motivace}
Tento nástroj byl vybrán z dùvodu vy¹¹ího roz¹íøení pøi vytváøení vìt¹ích 
projektù a pøevá¾nì díky tomu, ¾e tato aplikace nabízí velké mno¾ství funkcí a 
grafù, jak popsat právì vytváøenou aplikaci.

\subsection{Popis aplikace}
Enterprise Architect je velice robustní, ji¾ nemá nedostatky jako aplikace 
Umbrello a nabízí nìkolik mo¾ností k úpravì a vytvoøení zdrojových kódù 
projektu. Aplikace rozdìluje UML grafy do dvou skupin:
\begin{itemize}
  \item \emph{Structural Diagrams} pro diagramy na popis aplikace a její 
struktury.
  \item \emph{Behavior Diagrams} pro popis chování aplikace 
a komunikace mezi jejími jednotlivými èástmi. 
\end{itemize}
 Dále aplikace poskytuje velkou ¹kálu grafù a diagramù -- od klasických 
diagramù pro popis chování dat mezi sebou, pøes diagramy pro návrh Win32 UI, a¾ 
po návrh testování výsledné aplikace. \cite{enterpriseArchitect}

\subsection{Výhody a nevýhody}
V aplikaci je mo¾né vytvoøit velké mno¾ství grafù a diagramù. Grafické rozhraní 
ji¾ není tak jednoduché jako tomu je u aplikace Umbrello, vìt¹ina pokroèilých 
funkcí (jako napøíklad pøidání a editace atributù tøídy) je schována a je 
nároèné je najít.

Pro jednodu¹¹í a rychlej¹í mo¾nost spojení jednotlivých objektù na pracovní 
plo¹e lze pou¾ít rychlého nástroje vedle objektu. Na stejném místì lze nalézt 
také funkce pro rychlou editaci a zmìnu stylu objektu.

Pøeta¾ení spoje mezi dvìma objekty lze vytvoøit pomocí uchopení za jeden konec 
a ta¾ení k dal¹ímu objektu. Bohu¾el pùvodní spoj se neztratí do doby, ne¾ 
u¾ivatel pustí my¹. Toto mù¾e být ponìkud matoucí.

Nejvìt¹í výhodou nástroje Enterprise Architect je oproti ostatním aplikacím  
mo¾nost importovat zdrojové kódy a ty zobrazit v diagramu tøíd. Lze 
také vybrat binární soubor (napøíklad \texttt{.jar} soubor) a aplikace 
Enterprise Architect mù¾e vygenerovat dokumentaci a diagram tøíd.

Po úspì¹ném upravení diagramù tøíd lze opìt jednodu¹e provést export 
do zdrojových kódù. Na výbìr je celkem jedenáct jazykù \emph{ActionScript, C, 
C\#, C++, Delphi, Java, PHP, Python, VBNet, Visual Basic, WorkFlow 
Script}. \cite{enterpriseArchitect}

\section{Zhodnocení nástrojù Umbrello a Enterprise 
Architect}\label{vybraneSoucasti}
Pøi testování nástrojù urèených pro tvorbu UML grafù bylo zji¹tìno mnoho detailù 
a dùle¾itých vlastností, které bude výsledná aplikace potøebovat. Nìkteré výhody 
tìchto aplikací, jako napøíklad generování kódu, nebude potøeba implementovat  
vzhledem k tomu, ¾e aplikace se soustøedí èistì jenom na vytváøení a editaci 
diagramù a UML grafù.

V testovaných aplikacích nebyla nikde mo¾nost automatické pøedgenerace dal¹ích 
èástí návrhu pomocí pøede¹lých èástí. Napøíklad provázanost mezi diagramy 
pøípadù u¾ití a diagramem tøíd nebyla mo¾ná. V tomto ohledu bylo rozhodnuto, ¾e 
je potøeba tyto èásti propojit a více zautomatizovat pro rychlej¹í a svi¾nej¹í 
práci s výslednou aplikací.

V testovaných aplikacích chybìla (nebo byla nedostateèná) mo¾nost pro zalomení 
hran. Tato vlastnost napomù¾e zpøehlednìní výsledného diagramu, podobnì tomu 
bylo s editací hran.

\subsection{Vybrané funkce a mo¾nosti z Umbrello}
Aplikace Umbrello poskytla mnoho informací o vývoji editaèní aplikace, jakým 
chybám se vyvarovat a co je naopak nezbytné k vytvoøení kvalitního nástroje 
zamìøené na tvorbu diagramù. 

Vyplynulo, ¾e není zapotøebí ve výsledné aplikaci mnoho nároèných grafických 
elementù, tyto elementy by byly ru¹ivé. Grafické rozlo¾ení a dosa¾itelnost 
vìt¹iny editaèních prvkù je v aplikaci Umbrello velice jednoduché a intuitvní, 
z tohoto dùvodu bylo ve výsledném nástroji pøihlí¾eno na tyto vlastnosti.

V nástroji, který byl pozdìji implementován, bylo zabránìno nìkterým 
nedostatkùm aplikace Umbrello -- napøíklad zdlouhavé a repetetivní vytváøení 
tøíd, jejich pøesun po pracovní plo¹e nebo spojení tìchto tøíd.

V aplikaci Umbrello je neprakticky øe¹eno zalomení spojù mezi objekty na 
pracovním plátnì, kdy je nutné vybrat nástroj a a¾ poté vytvoøit zalomení, 
které lze pøesunout. Ve vyvíjeném nástroji bylo toto implementováno pomìrnì 
jednodu¹e. Pøi vytváøení spoje dát u¾ivateli okam¾itì mo¾nost tuto hranu 
zalomit, co¾ vede k celkovému zpøehlednìní grafu a dává dal¹í mo¾nosti pøi 
vytváøení diagramù.

Nepraktická práce s objekty v nástroji Umbrello také není dobrým pøíkladem. 
Pøevá¾nì z toho dùvodu, ¾e po pøidání nového objektu na pracovní plátno, 
je u¾ivatel okam¾itì donucen zadat jeho jméno. Dále pro pøesun objektù 
je nutné vybrat nástroj a a¾ poté je mo¾né tento objekt posunout. Toto vede ke 
zdlouhavým a stále se opakujícím akcím, které u¾ivatele zbyteènì zdr¾ují od 
práce. Tato èinost byla vyhodnocena jako nepøínosná a nutnost zadat jméno 
objektu pøi jeho vytvoøení bylo nahrazeno pozdìj¹í úpravou, kdy si u¾ivatel 
vytvoøí objekt a a¾ poté urèí jeho jméno. Podobnì tomu bylo u pøesunu objektu, 
kdy byla zavrhnuta nutnost výbìru speciálního nástroje pro tento pøesun.

\subsection{Vybrané vlastnosti z Enterprise Architect}
Aplikace Enterprise Architect poslou¾ila pro dal¹í zhodnocení po¾adavkù a 
vyvarování se chyb. Pøedev¹ím nároènost a komplexnost aplikace se nehodí pro 
výslednou aplikaci.

Ve výsledném nástroji bude zapotøebí mo¾nost jednoduchého zalomení hran a jejich 
jednoduché editace. Tato funkce bohu¾el v aplikaci Enterprise Architect je opìt 
nevyhovující a nepraktická. To vede k nepøehlednosti vìt¹ích diagramù.

Umístnìní otevøených souborù je v nástroji Enterprise Architect ponìkud 
netradièní -- v dolní èásti aplikace. U¾ivatel èasto nevidí otevøený projekt a 
proto se mù¾e stát, ¾e zavøe stávající jen kvùli tomu, aby na¹el ji¾ otevøený 
soubor. Pøi porovnání s aplikací Umbrello, která toto øe¹í více standardním 
zpùsobem (umístnìním zálo¾ek v horní èásti okna), je tento zpùsob ponìkud 
nepraktický.

V Enterprise Architect jsou druhy diagramù a grafù umístnìny ve stromové 
struktuøe z dùvodù rozsáhlosti aplikace. Toto je opìt nepou¾itelné v men¹ích 
aplikacích a zbyteènì nároèné na hledání a pøidání nového diagramu nebo grafu.

\chapter{Rozbor diagramù}\label{grafy}
Po prozkoumání nástrojù specializujících se na návrh aplikace bylo zvoleno, ¾e 
pro popis chování aplikace bude vhodné pou¾ít \emph{diagramy pøípadù u¾ití} 
\ref{pripadUziti} a pro popis jednotlivých tøíd, vztahù mezi tìmito tøídami a 
návrh operací je vhodný \emph{diagram tøíd} \ref{diagramTrid}. Pro popis 
chování tøíd a jejich metod bylo zvoleno Petriho sítí, pøesnìji jejich 
roz¹íøení s názvem \emph{objektovì orientované Petriho sítì} \ref{oopn}.

Dále byly tyto diagramy a grafy spojeny pro vzájemnou komunikaci na základì 
takzvaného \emph{Use-case driven developmentu}. Tento zpùsob se orientuje na 
propojení diagramu pøípadù u¾ití do diagramu tøíd a poté urèuje napojení 
objektovì orientovaných Petriho sítí na tyto tøídy, co¾ je blí¾e popsáno v 
kapitole \ref{spojeni}.

\section{Objektovì orientované programování}\label{obejktoveProgram}
Pøedtím, ne¾ rozebereme grafy, které slou¾í pro popis vývoje a vytvoøení návrhu 
je potøeba analyzovat objìktovì orientované programování. Jedná se o speciální 
styl programování pou¾ívaný pøevá¾nì pøi vývojí vìt¹ích a nároènìjèích aplikací.

\subsection{Objekt}
Základ objektovì orientovaného programování je samozøejmì objekt. Je to 
specifický pohled na fyzikální a konceptuální jednotky reálného svìta. 
Jednotlivé èásti objektu jsou:
\begin{itemize}
  \item Stav -- nese informaci, o tom v jakém stavu se objekt v daném 
  èase nachází. 
  \item Chování -- popisuje reakce na vnìj¹í a vnitøní události.
  \item Identita -- u ka¾dého objektu je jednoznaènì identifikovatelná v rámci 
systému -- má jméno, kterým se li¹í od ka¾dého jiného objektu.
\end{itemize}

Jako jeden z hlavních rysù objektovì orientovaného programování 
je zapouzdøení -- skrytí ve¹kerých dat a práce s daty pøed 
ostatními objekty. Ostatní objekty jsou schopné komunikovat mezi 
sebou pomocí zasílání zpráv. Tyto zprávy obsahují jméno 
operace, parametry (data potøebná pro zpracování) a jméno objektu 
obsahujícího tuto operaci. Zaslaná zpráva mù¾e slou¾it jak ke 
zpracování a navrácení dat, tak k vnitøní zmìnì objektu, který 
tuto zprávu pøijal.

Veøejné rozhraní objektu je urèeno mno¾inou operací, co¾ je 
výèet schopností objektu. Popis provádìní operace je schován 
uvnitø objektu a je urèen metodami. Uvnitø objektu se také 
nachází atributy, co¾ je pøedpis pro uchování dat. \cite{ModelovaniOOPN}

\subsection{Instanciace tøídy}
Ve vìt¹inì programovacích jazykù se vytváøení objektù provádí 
speciální konstrukcí, takzvanou tøídou. Tøída je pøedpis pro objekt.
 
Tøída definuje viditelnost instanèních promìnných (atributù) a metod. Dále 
definuje metody a jejich provádìní.
 
Objekty mohou být instanciovány staticky a dynamicky. Staticky instanciované 
tøídy se vytvoøí pøi spustìní programu a zanikají a¾ pøi jeho ukonèení. 
Dynamicky instanciované promìnné vznikají a zanikají v prùbìhu chodu aplikace 
v reakci na po¾adavky u¾ivatele. \cite{ModelovaniOOPN}

\subsection{Dìdiènost}
Dal¹í ze silných vlastností objektovì orientovaného programování je dìdìní. 
Slou¾í ke sdílení jisté charakteristiky jednoho objektu s druhým.

Ka¾dý jazyk má tuto vlastnost implementovanou rùznì. Dynamické a statické 
dìdìní mù¾e být zamìøeno na tøídy nebo objekty. Mù¾e být dìdìna reprezentace, 
nebo chování. Dìdìní mù¾e být implementováno èásteènì, nebo úplnì. A v 
neposlední øadì lze podle poètu dìdìní rozli¹it dìdìní násobné a jednoduché. 
\cite{ModelovaniOOPN}

\section{Diagram pøípadù u¾ití} \label{pripadUziti}
Diagramy pøípadù u¾ití jsou èasto modelovány a pou¾ívány ke komunikaci mezi 
zákazníkem, který nemá pøili¹ mnoho zku¹eností s vývojem systému, ale rozumí 
danému problému a svému oboru, a programátorem, èlovìkem, který naopak má 
zku¹enosti s vývojem aplikace, ale nechápe do hloubky zákazníkùv problém a jeho 
obor.

Základními prvky diagramu pøípadù u¾ití jsou pøípady u¾ití a aktéøi. V 
po¾adavcích na systém rozpoznáváme takzvané \uv{Stakeholdery}, jsou to osoby 
nebo vìci, které mají zájem na úspì¹ném provedení systému. Pøípady u¾ití 
popisují, jak se má systém zachovat na reakce stakeholderù, akterù, a dodat 
urèité výsledky. Aktéøi jsou na druhou stranu pøímí u¾ivatelé nebo vìci s 
urèitým chováním. Hlavní aktér je èasto stakeholderem a hlavní spou¹tìè tohoto 
systému. Obèas je zapotøebí aktér, který není pøímo v systému. Tomuto se øíká 
\uv{Podpùrný aktér}. Aktér není pøímo chápán jako jedinec, nýbr¾ jako role v 
systému. \cite{Pripad_uziti}

\subsection{Rozbor diagramu pøipadù u¾ití}
Diagramy pøipadù u¾ití se pou¾ívají pro grafický popis pøípadù u¾ití a 
zahrnují nìkolik pravidel. Aktéøi jsou znázoròováni ve tvaru postav a pøípady 
u¾ití jako elipsy obsahující název provádìného úkonu. Spoje mezi pøípady u¾ití a 
aktéry jsou znázornìny úseèkou vedoucí od aktéra k pøípadu u¾ití.

Mezi pøípady u¾ití mohou být vedeny dále spoje pro jejich roz¹íøení. Jsou to
\emph{include}, \emph{extends} a \emph{generalizace}. Poslední 
jmenovaný spoj je mo¾né také vést mezi aktéry.

\subsubsection{Include}
Include znamená to, ¾e pro správný chod daného nadøazeného pøípadu 
u¾ití je zapotøebí pou¾ití vlo¾eného. Pro vykonání vy¹¹ího pøípadu u¾ití je 
zapotøebí nejdøíve vykonat vlo¾ený. Pokud je pøi vykonávání nìkolika pøípadù 
u¾ití provádìna stejná operace, je vhodné tuto funkcionalitu oddìlit z daného 
pøípadu u¾ití a spojit se v¹emi pøípady u¾ití spojem include. Spoj include je 
znázornìn pøeru¹ovanou ¹ipkou doprovázené textem \uv{include}. Spoj je veden z 
nadøazeného pøípadu u¾ití k vlo¾enému.

\subsubsection{Extends} 
Extends slou¾í pro roz¹íøení pøípadù u¾ití. To znamená, ¾e je roz¹íøením 
hlavního pøípadu u¾ití, které bylo vyjmuto z pùvodního pøípadu. V  pøekladu 
tento spoj znamená, ¾e jeden pøípad u¾ití je roz¹íøen dal¹ím pøípadem u¾ití. 
Spoj je znázoròován pøeru¹ovanou ¹ipkou vedenou do roz¹iøovaného (hlavního) 
pøípadu u¾ití.

\subsubsection{Generalizace} 
Generalizaci lze pou¾ít jak v pøípadech u¾ití, tak mezi aktéry. Slou¾í ke 
znázornìní rodièù a potomkù. Pou¾ití tohoto spoje znamená, ¾e potomek pøebírá 
ve¹kerou funkcionalitu svého rodièe a tu mù¾e poupravit nebo pøidat vlastní. 
Tento spoj je znázornìn spojem ukonèeným prázdnou ¹ipkou a je veden od potomka k 
rodièi. \cite{Pripad_uziti}

\begin{figure}[h!]
\centering
  \includegraphics[trim = 0mm 150mm 0mm 0mm, clip, 
scale=0.5]{fig/UseCase}
  \caption{Pøíklad diagramu pøípadù u¾ití.}
  \label{useCaseExam}
\end{figure}

Na obrázku \ref{useCaseExam} lze vidìt jednoduchý systém pøidávání, editace a 
zobrazení dat, kdy se v systému nachází dvì role a ka¾dá má pøístup k odli¹ným 
akcím.

\section{Diagram tøíd} \label{diagramTrid}
Po znázornìní funkèních po¾adavkù na aplikaci pomocí diagramù pøípadù 
u¾ití se nabízí dal¹í nástroj z UML rodiny a tím je \emph{Diagram tøíd}. 
Tento diagram slou¾í pro grafické znázornìní tøíd. Bli¾¹í seznámení s 
objektovì orientovaným programováním bylo probráno v kapitole 
\ref{obejktoveProgram}.

\subsection{Prvky diagramu tøíd}
Hlavní slo¾kou diagramu jsou tøídy, které jsou znázornìny pomocí obdélníkù 
obsahující dal¹í informace o dané tøídì. V horní èásti je název tøídy. Poté 
tøída obsahuje tøídní promìnné, atributy. A poslední èást tøíd jsou operace, 
metody.

V diagramu tøíd lze také namodelovat interface -- to je speciální tøída
obsahující pøedpis pro atributy a operace. V interfacu se nenachází 
implementace tìchto operací, ta se nachází a¾ ve tøídách, které pou¾ívají tento 
interface.

Zápis atributù a operací tøíd je stanoven tak, ¾e za jménem následuje 
dvojteèka a její typ. V pøípadì operací se napí¹e jméno a za ním je uvedena 
závorka obsahující seznam argumentù a a¾ poté dvojteèka urèijící návratový 
typ. Pokud operace nic nevrací, je mo¾né indikovat toto pomocí nastavení 
návratové hodnoty na \uv{void}. Dále je mo¾né omezit vyditelnost atributù a 
operací pomocí identifikátoru. \emph{Private} oznaèované \uv{-}, 
\emph{protected} jako \uv{\#} a \emph{public} znázornìné pomocí \uv{+}. 
Tyto identifikátory se pí¹í pøed jméno atributu nebo operace.

Jednotlivé hrany pro spojení se dìlí na \emph{Generalizaci}, 
\emph{Asociaci}, \emph{Agregaci}, \emph{Kompozici} a \emph{Implementaci}. 
\cite{Diagram_trid}

\subsubsection{Generalizaèní hrana}
Hrana \emph{Generalizace} popisuje spojení mezi tøídou, která je více 
obecná a tøídou, která je specifická. Generická tøída se nazývá 
\emph{superclass}, nebo také \emph{rodiè}, a více specifická tøída se nazývá 
\emph{subclass}, známá té¾ jako \emph{potomek}.

V UML je tato hrana popsána ¹ipkou ukonèenou bílým trojúhelníkem 
na konci. Tato hrana je vedena smìrem od generické tøídy k více specifické.

Je také mo¾né nìkolikanásobná dìdiènost, ale v pøípadì implementace této 
dìdiènosti se musí vzít v potaz to, zda daný jazyk nìkolikanásobnou dìdiènost 
podporuje, proto¾e pøi takovéto dìdiènosti èasto mù¾e nastat problém. Pøedev¹ím 
díky tomu, ¾e pokud tøída A dìdí od tøíd B a C a tøída B i tøída C obsahují 
stejnou metodu, programátor musí øe¹it, která metoda se má v tøídì A pou¾ít. 
Napøíklad v jazyce Java\texttrademark nìkolikanásobná dìdiènost povolena není, 
ale je mo¾né pou¾ít interface. \cite{Diagram_trid}

\subsubsection{Asociaèní hrana}
Asociaèní hrana je vztah mezi tøídami, který urèuje, ¾e objekty jedné 
tøídy jsou pou¾ívány v objektech druhé tøídy.

Asociace je kreslena v UML pomocí hrany s jednou ¹ipkou na konci a jmenuje se 
\emph{jednosmìrná}. Takto pou¾itá asociace znamená, ¾e tøída, ze které ¹ipka 
vede, je pou¾ita ve tøídì, do které tato ¹ipka smìøuje. Tuto hranu lze kreslit 
také s ¹ipkami na obou koncích, jmenuje se \textbf{obousmìrná} a znamená, ¾e 
obì tøídy se pou¾ívají navzájem. Takto urèená asociace není pøíli¹ pou¾ívaná. 
\cite{Diagram_trid}

\subsubsection{Agregaèní hrana}
Pou¾ití spoje Agregace znaèí, ¾e urèitý objekt potøebuje ke svému chodu
dal¹í objekt. Pokud ov¹em pøestane existovat pùvodní objekt, dal¹í objekt
lze nadále v systému pou¾ít. To znamená, ¾e objekt tøídy A potøebuje ke svému
chodu objekt tøídy B. V momentì odstranìní objektu tøídy A ze systému ale
objekt tøídy B nezaniká. Tomuto se øíká slabá agregace. Tato hrana je kreslena 
souvislou èarou opatøenou bílým diamantem na konci. \cite{Diagram_trid}

\subsubsection{Kompozièní hrana}
Tato hrana je z èásti stejná jako hrana Agregaèní s tím rozdílem, ¾e
reprezentuje silnou agregaci. To znamená, ¾e pokud objekt tøídy A potøebuje
ke svému chodu objekt tøídy B, v momentì odstranìní objektu tøídy A je ze 
systému odtranìn objekt tøídy B. Tato hrana je kreslena souvislou èarou 
opatøenou èerným diamantem na konci. \cite{Diagram_trid}

\subsubsection{Implementaèní hrana}
Tato hrana je specifická v tom, ¾e se kreslí pouze mezi tøídou a interfacem.
Slou¾í ke znázornìní, ¾e tøída A implementuje interface B, pøevezme v¹echny
atributy tøídy B a pøetí¾í operace tøídy B, které implementuje. Hrana je 
kreslena pøeru¹ovanou ¹ipkou ve smìru od implementované tøídy k
interfacu. \cite{Diagram_trid}

\begin{figure} [h!]
\centering
  \includegraphics[trim = 0mm 150mm 0mm 0mm, clip, 
scale=0.5]{fig/ClassDiagram}
  \caption{Pøíklad diagramu tøíd.}
  \label{diagramClassExamp}
\end{figure}
Na obrázku \ref{diagramClassExamp} lze vidìt zpùsob spojení nìkolika tøíd, kdy 
nìkteré tøídy obsahují tøídní promìnné, v horní èásti a ve spodní poté jejich 
metody.

\section{Objektovì orientované Petriho sítì} \label{oopn}
Pro popis tøíd a chování objektù na zaslané zprávy a popis implementace metod 
(operací) bylo pou¾ito objektovì orientovaných Petriho sítí.

\subsection{Petriho sítì}\label{PN}
Objektovì orientované Petriho sítì jsou roz¹íøením Petriho 
sítí. Základní Petriho sítì jsou vhodné pro modelování a 
teoretické zkoumání paralerních systémù.

Chování dynamického systému je v podstatì sledování stavové 
promìnné a zaznamenávání její hodnoty v èase.

Petriho sí» lze matematicky zapsat jako \(N = (P_N, T_N, PI_N, 
TI_N)\), kde:
\begin{itemize}
  \item \(P_N\) je koneèná mno¾ina \emph{míst}.
  \item \(T_N\) je koneèná mno¾ina \emph{pøechodù}, \(P_N 
  \bigcap T_N = \emptyset\).
  \item \(PI_N\) : \(P_N \to \mathbb{N}\) je \emph{inicializaèní funkce}.
  \item \(TI_N\) je \emph{popis pøechodù}. Je to funkce definovaná 
  na \(T_N\), taková, ¾e \(\forall t \in T_N\):
  \(TI_N = (PRECOND_t^N, POSTCOND_t^N) \), kde:
  \begin{enumerate}
	\item \(RECOND_t^N : PN \to \mathbb{N}\) jsou \emph{vstupní 
	podmínky} pøechodu.
	\item \(POSTCOND_t^N: P_N \to \mathbb{N}\) jsou \emph{výstupní 
	podmínky} pøechodu t.
  \end{enumerate}
\end{itemize}

Petriho sítì se skládají z míst a pøechodù, tyto prvky jsou 
spojeny orientovanými hranami. Nemohou být spojeny dvì místa mezi 
sebou a stejnì tak nemohou být spojeny dva pøechody pøímou hranou.

Procesy jsou v Petriho sítích znázornìny teèkou uvnitø míst. V 
prùbìhu provádìní simulace se tento bod pøesouvá mezi 
jednotlivými místy. Tyto pøesuny jsou provedeny na základì 
splnìní pravidel zanesených v pøechodech. Tato pravidla jsou 
atomická, co¾ znamená ¾e se buï toto pravidlo provede nebo neprovede.

Pøechody mohou být okam¾ité, pøi splnìný zanesených pravidel se okam¾itì 
provedou. Nebo mohou být èasované, co¾ znamená, ¾e po urèitém èase se daný 
pøechod realizuje. Toto je velice jednoduché roz¹íøení základních Petriho sítí.

Úspì¹né provádìní pøechodù probíhá tak, ¾e nejdøíve dojde k odebrání znaèek ze 
vstupního místa a poté pøídání znaèek na výstupní místo.

Dále mù¾eme sítì roz¹íøit pomocí prioritizací spojení mezi místy a pøechody, 
nebo vlo¾ením procentuální pravdìpodobnosti provedení daného spoje.
\cite{ModelovaniOOPN}

\subsubsection{Roz¹íøení Petriho sítí}
Základní Petriho sítì pøedstavují pøíli¹ nízkoúrovòový prototyp pro modelování 
reálných systémù. Z toho dùvodu bylo zavedeno nìkolik roz¹íøení. Pro pozdìj¹í 
pou¾ití nás nejvíce zajímá roz¹íøení Petriho sítí na funkcionální, co¾ 
je rozdìlení pøechodu na strá¾ a akci. Do místa akce je mo¾né volat 
jednotlivé èásti sítí.

Toto lze poté roz¹íøit o objektové rozdìlení s tím, ¾e v místì akce lze volat 
vytvoøení nového objektu jiné sítì a poté zaslání zprávy tomuto objektu.

\subsection{Objektovì orientované Petriho sítì}
Model systému, ve kterém mohou dynamicky vznikat a zanikat objekty
komunikující pøedáváním zpráv, lze vhodnì znázornit pomocí 
objektovì orientovaných Petriho sítí. Jako model je mno¾ina 
tøíd, hierarchicky organizována podle dìdiènosti. Ka¾dá z 
tìchto tøíd obsahuje tyto prvky:
\begin{itemize}
	\item Sí» objektu, která definuje reprezentaci instance tøídy.
	\item Mno¾inu sítí metod, které modelují reakce na zaslané 
	zprávy.
	\item Mno¾inu synchronních portù, definující reakce na 
	synchronní zprávy.
\end{itemize}

Sítì metod mohou sdílet atributy objektu. Mají navíc parametrová místa, do 
kterých se pøi invokaci takové sítì vlo¾í parametry ze zprávy. Dále mají 
výstupní místo \emph{return}, co¾ je, místo do kterého se ulo¾í výstupní 
hodnota.

Znaèky v sítích nereprezentují samotné objekty, ale pouze reference na tyto 
objekty. V objektovì orientovaných Petriho sítích jsou tøi druhy objektù.  
Primitivní tøídy to jsou èísla znaky, øetìzce, symboly a seznamy. Dal¹í objekty 
jsou tøídy, tyto objekty se v prùbìhu simulace nemìní a rozumìjí na volání 
\emph{new}, co¾ vede k vytvoøení nové instance. Ostatní objekty jsou 
instancemi tøídy.

Proveditelnost pøechodu v objektovì orientovaných Petriho sítích 
je rozdìleno na strá¾ pøechodu a akci. Strá¾ pøechodu obsahuje 
sekvenci výrazù a ka¾dý z nich je zaslání zprávy. Pokud ka¾dá 
dílèí zpráva vrací \emph{true}, strá¾ je vyhodnocena jako \emph{true}.

Akce pøechodu specifikuje zaslání zprávy. Budeme uva¾ovat tvar 
zaslání zprávy \eqref{zprava}:

\begin{equation}\label{zprava}
y := x_0.msg(x_1, \dots, x_n),
\end{equation}
kde \(y\) je promìnná, \(x_i\) je term a \(msg\) je jméno zprávy. 
Objekt se jménem \(x_0\) je adresátem zaslané zprávy a \(x_i\) jsou 
argumenty této zprávy. V tìchto akcích je zapotøebí definovat 
také speciální zprávu \(new\), která vede k vytvoøení nové 
instance tøídy \(x_0\).

Výsledná objektovì orientovaná Petriho sí» má v¹echny atributy objektovì 
orientovaného jazyka. Umo¾òuje zapouzdøení, polymorfismus a dìdiènost. 
\cite{ModelovaniOOPN}

Na obrázku \ref{petriNetFig} lze vidìt pøíklad návrhu metody dìlení, kdy v 
pøípadì, ¾e dìlitel je 0 vrátí se null, v opaèném pøípadì se do návratového 
místa ulo¾í podíl \emph{x} a \emph{delitel}.

\begin{figure}[h!]
\centering
  \includegraphics[trim = 0mm 150mm 0mm 0mm, clip, 
scale=0.5]{fig/petriNet}
  \caption{Pøíklad popisu metody pro dìlení pomocí objektovì orientovaných 
Petriho sítí.} \label{petriNetFig}
\end{figure}

\subsection{Grafické znázornìní}
Jednotlivá místa se znázoròují v objektovì orientovaných Petriho sítích jako 
koleèka obsahující stav tohoto místa, napøíklad referenci na objekty. Pøechody 
jsou znázornìny obdélníkem obsahujícím strá¾ a akci. Akce se nachází pod èarou 
a nad èarou se nachází strá¾.

\section{Koncept aplikace}\label{spojeni}
Vytvoøit jednotlivé diagramy a Petriho sítì je pouze èást tohoto nástroje, jeho 
pøedností má být automatické a urychlené vytváøení aplikací. Z tohoto dùvodu 
bylo zvoleno zavedení \emph{Use-Case driven developmentu}.

Tento pohled na návrh aplikace je veden tak, ¾e na základì diagramu pøípadù 
u¾ití je mo¾né vytvoøit automaticky tøídy v diagramu tøíd. A to tak, ¾e aktér 
je modelován jako tøída se speciálním typem \emph{Actor} a pøípad u¾ití je 
modelován jako tøída s urèením \emph{Activity}.

Pro tyto tøídy nadále platí stejná omezení jako pro aktéry a pøípady u¾ití. 
Dále je tento zpùsob výhodný z toho hlediska, ¾e po navrhnutí chování aplikace 
máme okam¾itì k dispozici základní kostru a strukturu v diagramu tøíd. Tato 
kostra se dá roz¹íøit dal¹ími tøídami, které mohou být zobrazeny v diagramu 
pøípadù u¾ití po urèení jejich role, nebo mohou být pouze jako pomocné 
tøídy (nezobrazené v diagramu pøípadù u¾ití).

Takto vytvoøené tøídy a dal¹í tøídy lze poté popsat pomocí objektovì 
orientovaných Petriho sítí. To se provede tak, ¾e ka¾dá tøída má svoji zvlá¹tní 
Petriho sí», ve které lze znázornit komunikaci s ostatními tøídami. Ka¾dá 
metoda této tøídy má opìt vlastní Petriho sí», tato sí» má je¹tì roz¹íøení v 
podobì speciálního místa urèeného pro návratovou hodnotu.

Pou¾itím tohoto koceptu lze dosáhnout plynulého návrhu aplikace a po vytvoøení 
objektovì orientovaných Petriho sítí je mo¾né testování této aplikace bez 
nutnosti editace zdrojových kódù \cite{usecaDrivenDevelopmen}.

\subsection{Pou¾ití ve výsledné aplikaci}
Provázání mezi UML èástmi probíhá tak, ¾e pøi vytvoøení objektu v diagramu 
pøípadù u¾ití vznikne tøída se stejným názvem v diagramu tøíd. Na objektovém 
analytikovi potom je, aby zadal jednotlivé atributy a operace. Pokud vznikne 
pøípad, ¾e se analytická tøída rozpadne na více tøíd, je toto mo¾né realizovat 
dvojím zpùsobem. A to tak, ¾e se odstraní analytická tøída a vzniknou dvì nové 
tøídy, které se nepromítnou do diagramu pøípadù u¾ití. A nebo zachováním 
analytické tøídy a navázáním nové tøídy, která se nepromítne do pøípadù u¾ití.

Zpùsob znázornìní jednoduchého pøípadu u¾ití je vidìt na obrázku 
\ref{useCasePropoj}, kde máme dva aktéry a ka¾dý z nich pou¾ívá rùznou akci. 
Tyto akce jsou v¹ak roz¹íøeny pomocí include spoje o pøípad u¾ití.

\begin{figure}[h!]
  \centering
  \begin{tikzpicture}
    \node[anchor=south west,inner sep=0] at (0,0) 
  { \includegraphics[trim = 0mm 150mm 0mm 0mm, clip, 
scale=0.5]{fig/UseCasePropoj}
    };
    \draw (2,0) -- (2,7);
    \node at (0.5,1) {Actors};
    \node at (5,1) {Activities};
  \end{tikzpicture}
  \caption{Nástin problému pøípadù u¾ití.} \label{useCasePropoj}
\end{figure}

Tento pøípad u¾ití se poté promítne do diagramu tøíd s tím, ¾e jednotliví 
aktéøi budou reprezentováni tøídami s pøíznakem \emph{Actor} a pøípady u¾ití 
jako \emph{Activity}. Spoje mezi tìmito tøídami jsou toto¾né s tìmi, co jsou v 
diagramu pøípadù u¾ití. S tím rozdílem, ¾e je na objektovém analytikovi 
rozhodnout, jaký spoj se pou¾ije v pøípadì include -- zda agregace, nebo 
kompozice. Objektový analytik je pøed toto rozhodnutí také postaven v 
pøípadì pou¾ití extends spoje. Po vytvoøení tìchto tøíd je mo¾né zadat tøídní 
promìnné a metody k jednotlivým tøídám. Výsledný diagram provázání mù¾eme vidìt 
na obrázku \ref{classdiagramPropoj}, kdy aktéøi odpovídají tøídám, které mají 
pøíznak \emph{Actor} a pøípady u¾ití tøídám s pøíznaky \emph{Activity}.

\begin{figure}[h!] 
\centering
  \includegraphics[trim = 0mm 130mm 0mm 0mm, clip, 
scale=0.5]{fig/ClassDiagramPropoj}
  \caption{Nástin problému pøevodu pøípadu u¾ití do diagramu tøíd.} 
\label{classdiagramPropoj}
\end{figure}

K popisu jednotlivých tøíd a metod dále slou¾í objektovì orientované Petriho 
sítì. Ka¾dá tøída a také ka¾dá metoda má jednu objektovì orientovanou Petriho 
sí». Pøíklad navrhnutí metody \emph{isUserAllowed} (z tøídy \uv{pristup k 
datum}) je vidìt na obrázku \ref{oopnPropoj}, kdy se kontroluje, zda se 
u¾ivatelské ID nachází v povolených, pokud tomu tak je, vrátí se hodnota 
\emph{true}.

\begin{figure}[h!] 
\centering
  \includegraphics[trim = 0mm 130mm 0mm 0mm, clip, 
scale=0.5]{fig/petriNet_makeActionMethodaPropoj}
  \caption{Metoda isUserAllowed popsána objektovì orientovanou Petriho sítí.} 
\label{oopnPropoj}
\end{figure}

Objektovì orientované Petriho sítì mají nìkolik speciálních míst. V 
pøípadì Petriho sítì pro tøídu jsou to tøídní promìnné této tøídy a zdìdìné 
tøídní promìnné od svých pøedkù. V pøípadì Petriho sítì pro metodu je mno¾ina 
tìchto zvlá¹tních míst roz¹íøena o argumenty metody (které jsou vstupními místy 
pro tuto sí») a jedno speciální místo, kde je ulo¾ena návratová hodnota.
\cite{oopn_caseStudy}

\section{Shrnutí}
V této kapitole byly pøiblí¾eny nástroje slou¾ící ke 
znázornìní postupného vývoje aplikace, ke zjednodu¹ení vývoje a 
pøevá¾nì k zpøehlednìní komunikace uvnitø aplikace.

Motivací pro výbìr tìchto nástrojù byla skuteènost, ¾e se v 
moderním programování pou¾ívá pøevá¾nì objektovì 
orientovaných postupù. Tyto nástroje dále podporují \emph{Use-case driven 
development}, co¾ vede k jednoduché provázanosti 
mezi tìmito nástroji a ke zjednodu¹ení a urychlení 
vývoje. S ohledem na moderní zpùsob agilního vývoje jsou tyto 
nástroje vhodné, a to pøevá¾nì z hlediska jednoduché integrace zákazníka do 
vývoje a okam¾ité promítnutí zmìn od zákazníka na celý systém.

\chapter{Návrh aplikace} \label{samotatnaAplikace}
Po vyzkou¹ení nástrojù specializujících se na návrh aplikací, bylo zji¹tìno, ¾e 
¾ádný z nich neimplementuje mo¾nost vzájemného propojení, jak bylo 
specifikováno v po¾adavcích. Také byl potvrzen oèekávaný výsledek, kdy 
¾ádný nástroj neobsahoval mo¾nost návrhu pomocí objektovì orientovaných Petriho 
sítí.

Nejdøíve si v \ref{popisAplikace} objasníme design aplikace, rozmístnìní 
jednotlivých prvkù a zpùsob ovládání. Poté zde probereme nìkteré speciální 
ovládací prvky. Závìrem této kapitoly popí¹eme jednotlivé editory, jejich 
roz¹íøení a pou¾ívání \ref{jednotliveEditory}.

\section{Popis aplikace} \label{popisAplikace}
Na základì poznatkù z ostatních aplikací bylo rozhodnuto o jednoduchosti a 
intuitivním ovládání. Tohoto bylo docíleno sjednocením základního designu 
aplikace a pou¾itím klávesových zkratek, které jsou známé z moderních aplikací.

Hlavní okno se skládá z nìkolika panelù. V horní èásti se nachází menu 
obsahující jednoduché operace nad projekty. Dále jsou zde umístnìny ovládací 
prvky, slou¾ící pro práci se soubory a exporty daného souboru. Celý hlavní 
obsah aplikace se nachází ve zbylých dvou tøetinách okna. V levé jsou tlaèítka 
pro mo¾nost pøepínání jednotlivých vkládaných objektù a pøepínání mezi druhy 
spojù. Dolní èást obsahuje informaèní a editaèní mo¾nosti zvoleného prvku a pro 
hlavní èást je vyèlenìn zbytek pracovní plochy -- takzvané editaèní plátno.

Na toto plátno je mo¾né pøidávat jednotlivé prvky, spojovat je, pøesouvat je a 
mazat je. Po vybrání nìkterého tlaèítka v levém menu je mo¾né zaèít pøidávat 
prvky. Po zakliknutí vybraného prvu a kliknutí na editaèní plátno se vytvoøí 
objekt, po ta¾ení se vybraný objekt pøesune a pro spojení 
dvou objektù hranou je zapotøebí vybrat typ hrany z levého menu a poté kliknout 
na první objekt a následnì na druhý. Pokud je potøeba spoj zahnout pro 
zpøehlednìní grafu, je toto mo¾né vyvolat kliknutím na pravé tlaèítko my¹i 
bìhem ta¾ení spoje.
\section{Architektura aplikace}
Architekturu výsledného nástroje si lze prohlédnout na obrázku 
\ref{architekturaAplikace}, kde je èásteènì znázornìno, jak jsou jednotlivé 
tøídy navzájem provázané.

\begin{figure}[h!] 
  \centering
    \includegraphics{fig/navrhAplikace}
  \caption{Architektura aplikace.} 
\label{architekturaAplikace}
\end{figure}

Tøída \emph{GUI} je základní tøída, obsahuje \emph{main} a také vytváøí objekty 
z jednotlivch tøíd. V tøídì \emph{PlaceManager} jsou ulo¾eny v¹echny objekty a 
jejich v¹echny spoje. Tato tøída je obsahem tøídy \emph{DiagramPlacesManager}, 
která se stará o jednotlivé èásti a diagramy. Petriho sítì jsou ulo¾eny pomocí 
\emph{ArrayListu}, proto¾e je potøeba mít více sítí pro jeden projekt. 

\emph{CoordinateModel} je tøída starající se o ka¾dý objekt. Obsahuje X a Y 
souøadnice, rozmìry a základní popis objektu. Od této tøídy dìdí dále tøídy 
\emph{UCActor, UCUseCase, CDClass, PNPlace a PNTransition}. Tyto tøídy 
specifikují jednotlivé objekty na editaèním plátnì a také se starají o 
vykreslování na pracovní plátno.

Od tøídy \emph{CoordinateModel} dále dìdí \emph{Linemodel}, ta se stará o 
ulo¾ení jednotlivých spojù mezi objekty. Koncové body jsou spoèítány pomocí 
\emph{PointsCalculator} a nejdùle¾itìj¹í rolí tøídy \emph{Linemodel} je, ¾e je 
rodièovskou tøídou pro v¹echny spoje, tak¾e od ní dìdí tøídy \emph{UCJoinEdge, 
CDJoinEdge, PNJoinEdge}. Tyto tøídy se starají o styl vykreslovaných spojù a 
nastavují rùzná pravidla pro spoje.

Základní tøídou pro v¹echny editory je \emph{MainController}. Ukládá v sobì 
v¹echny objekty z daného projektu a je rodièem tøíd \emph{UseCaseController, 
ClassDiagramController a PetriNetController}, které se starají o vykonání akcí 
-- jako napøíklad vytvoøení adekvátní tøídy po pøidání pøípadu u¾ití.

Ka¾dá tøída má nìkolik metod, zde uvedené jsou pouze na ukázku. Pøevá¾nì tøídy, 
které mají v názvu slovo \uv{Model} jsou znaènì rozsáhlé díky tomu, ¾e je v 
nich ulo¾eno ve¹ekeré nastavení tøídních promìnných pro potomky. Dále 
jednotlivé tøídní promìnné mají v ka¾dé tøídì metody pro jejich získání a 
popøípadì jejich nastavení (takzvané \uv{getery} a \uv{setery}).

Podrobnìj¹í popis tøíd a metod je v dokumentaci tohoto nástroje 
\footnote{Dokumentace je souèástí pøilo¾eného CD.}.

\section{Jednotlivé editory}\label{jednotliveEditory}
Jednotlivé editory, jak ji¾ bylo øeèeno v pøechozích kapitolách, jsou 
\emph{diagram pøípadù u¾ití} \ref{pripadUziti}, \emph{diagram tøíd} 
\ref{diagramTrid} a \emph{objektovì orientované Petriho sítì} \ref{oopn}. T0yto 
editory byly nadále mírnì pozmìnìny, pøevá¾nì z grafického hlediska pro 
zlep¹ení pøehlednosti tìchto diagramù a pro jednodu¹¹í práci mezi nimi.

Základním odli¹ením ve v¹ech editorech je zvýraznìní objektu, který nemá ¾ádnou 
spojující hranu. Tyto objekty jsou zvýraznìny pomocí èárkování. Vybraný objekt 
je znázornìn ohranièením a odli¹nou barvou. Pokud objekt nemá odpovídající 
\uv{obraz}, je zvýraznìn kurzívou a textem pod objektem. Toto platí pøevá¾nì 
pro propojení diagramu tøíd a diagramu pøípadù u¾ití. Pokud spoj mezi dvìma 
objekty nemá tento obraz, je zvýraznìn odli¹nou barvou.

\subsection{Editor pøípadù u¾ití}
Tento editor je prvním editorem a slou¾í pro popis chodu aplikace, zde se 
nachází pouze mírné úpravy.

V pøípadì vybrání \emph{aktéra} je zakázáno u¾ivateli spojit stejné objekty 
jinak ne¾ dìdìním. Dále mù¾e u¾ivatel spojit \emph{aktéra} a \emph{pøípad u¾ití} 
pouze pomocí asociace. Toto lze provést pouze ve smìru od \emph{aktéra}, tudí¾ 
pokud toto u¾ivatel provede naopak je hrana otoèena automaticky.

Pro zmìnu jména objektu je potøeba na nìj poklepat dvakrát. Zde je také mo¾né 
zmìnit jeho propojení s tøídou, nebo reaktivovat spoj mezi tøídou a objektem, 
pokud v Diagramu tøíd není tøída odpovídající editovanému obejktu. S touto 
reaktivací se také znovu vytvoøí spoje mezi tøídami a nebo mezi objekty v 
diagramu pøípadù u¾ití.

Pokud chce u¾ivatel hromadnì reaktivovat objekty pøípadù u¾ití a opìt vytvoøit 
tøídy v diagramu tøíd, lze to provést kliknutím na tlaèítko \emph{Reactivate 
all inactive}. Pokud na druhou stranu u¾ivatel chce hromadnì smazat v¹echny 
neaktivní objekty, mù¾e kliknout na \emph{Delete all inactive}.

\subsection{Editor diagramu tøíd}
V tomto editoru je mo¾né ji¾ popsané chování aplikace rozdìlit pomocí objektovì 
orientovaného programování popsaného v sekci \ref{obejktoveProgram}. Dále lze 
vytvoøit jednotlivé tøídy a ty poté editovat.

Pokud je vytvoøen a vybrán \emph{interface} není mo¾né jej spojit s ostatními 
tøídami jinak ne¾ spojem \emph{implementace}, nebo mezi jednotlivými 
\emph{interfacy} pomocí spoje \emph{generalizace}.

Pro editaci jména je nutné dvakrát poklepat na tøídu a v oknì, které vyskoèí 
je také mo¾né nastavit její \uv{roli} v systému.
\begin{itemize}
  \item \emph{Actor} -- po vybrání tohoto druhy tøídy se v diagramu pøípadù 
u¾ití vyvtoøí Aktér.
  \item \emph{Activity} -- pokud je vybrán tento typ tøídy je v diagramu 
pøípadù 
u¾ití vytvoøen pøípad u¾ití.
  \item \emph{None} -- tento druh tøídy slou¾í pro vytváøení pomocných tøíd.
  \item \emph{Interface} -- pouze pro vytvoøení metod a tøídních promìnných, 
nelze pro nì vytvoøit Petriho sí».
\end{itemize}
Výbìr role je mo¾ný pouze u tøíd, které nemají doposud ¾ádný spoj. Tøídy 
\emph{None} a \emph{Interface} se nepromítnou do diagramu pøípadù u¾ití, 
slou¾í pouze ke snadnìj¹í implementaci nìkerých funkcí.

Pokud je potøeba znovu aktivovat a vytvoøit obraz v diagramu pøípadù u¾ití je 
nutné tøídu nejdøíve spojit s dal¹í tøídou a poté po dvojkliku na tuto tøídu 
bude vyvoláno okno s editací a tato tøída bude mít mo¾nost opìtovné aktivace 
objektu a nebo spojení s jiným objektem.

Pro pøidání metod a tøídních promìnných se nachází v pravé dolní èásti editor 
tøíd. Nejdøíve je zapotøebí vybrat tøídu, pro kterou po¾adujeme pøídáni 
nìkterého prvku a poté zadat viditelnost, jméno a typ. Pøíslu¹ný øádek slou¾í 
pro tøídní promìnnou nebo metodu. Pro zjednodu¹ení je mo¾né nastavit typ 
promìnné a operace, jako typ jakékoliv tøídy, která se momentálnì nachází na 
editaèním plátnì.

Po úspì¹ném vlo¾ení metod a popøípadì tøídních promìnných je mo¾né pøidat 
argumenty metodám. To se provádí v levé spodní èásti. Po výbìru tøídy, pro 
kterou je potøeba editovat argumenty metody, dvojklikem vybereme metodu, kterou 
je potøeba editovat a poté zadat argumenty oddìlené èárkami. Pokud chceme 
odstranit nìkterou tøídní promìnnou, nebo metodu, je toto mo¾né provést 
tlaèítkem vedle polo¾ky.

\subsection{Editor objektovì orientovaných Petriho sítí}
Pro vstup do tohoto editoru je zapotøebí vybrat tøídu, pro kterou budou 
editovány Petriho sítì. Automaticky je vybrána Petriho sí» pro tøídu,
pøepnutí mezi Petriho sítìmi pro tøídu a metody probíhá v levém dolním rohu.

V pravém dolním rohu, pokud není vybrán ¾ádný objekt na pracovním plátnì, je 
mo¾né pøidat tøídní promìnné nebo argumenty metody jako \emph{místa}. Takto 
pøidaná místa nelze editovat. Vkládat konstanty, operovat s tìmito místy nebo 
je mazat lze, ale mìnit jejich jméno není povolené. Podobnì tomu je u 
návratových míst v Petriho sítích pro metody, kde je jedno speciální místo 
\emph{return}. Toto místo je podobnì needitovatelné a navíc jej není mo¾né 
odstranit.

Pøidaná místa je mo¾né dále editovat pomocí vkládání konstant. Staèí vybrat 
místo a v pravém dolním rohu aplikace lze vidìt aktuální konstantu (pokud není 
¾ádná, je input prázdný), kterou lze zmìnit.

Po pøídáni \emph{pøechodu} (èasto nazývaném Transition) je mo¾né tomuto 
Pøechodu editovat dvì slo¾ky. Slo¾ku \emph{strá¾} (nazýván té¾ Guard) a 
slo¾ku \emph{akce} (Activity). Výbìrem pøechodu se zobrazí v pravé dolní èásti 
mo¾nost tyto slo¾ky editovat. Po kliknutí na pøíslu¹né tlaèítko budou vyvolány 
okna pro editaci jednotlivých slo¾ek.

\begin{itemize}
  \item \emph{Slo¾ka Strá¾e}:
Pro základní vytváøení pravidel je v horní èásti okna pro editaci strá¾e volné 
textové pole, kam je mo¾né zadat jakýkoliv text. Pokud je potøeba zadat více 
kontrolovaný vstup, je mo¾né si ve spodní èásti vybrat promìnné nebo zadat 
konstanty a vybrat jejich podmínku. Poté lze nastavit horní text pøímo na tuto 
podmínku nebo spojit operátorem s pøechozí podmínkou. V textové èásti lze poté 
výslednou podmínku editovat a dále upravovat.
  \item \emph{Slo¾ka Akce}:
Pro vytvoøení nové promìnné je mo¾né vyu¾ít horního pole. Lze také vybrat 
promìnnou, která je ji¾ spojena s tímto pøechodem. Dal¹í editace akce probíhá 
pøes textové pole -- toto pole ale není nijak kontrolované a upravované. 
Rozdìlení takového textu a jeho kontrola je pøíli¹ nároèná, navíc nebyla 
pøedmìtem této práce. Ale pøidání ve¹kerých kontrol na podobné texty v 
objektovì orientovaných Petriho sítích je jistì dobrý plán na roz¹íøení tohoto 
nástroje.
\end{itemize}

V objektovì orientovaných Petriho sítí je pouze jeden spoj. Pro tento 
spoj platí omezení v podobì mo¾nosti spojit pouze místo s pøechodem, nebo 
naopak. Není v¹ak mo¾né spojit dvì místa nebo pøechody pøímo mezi sebou.

Dal¹ím roz¹íøením spojù oproti ostatním editorùm je to, ¾e lze pøidávat 
promìnné, které jsou pøes tento spoj \uv{pøená¹eny}. Po dvjokliku na hranu si 
lze vybrat mno¾inu promìnných, které jsou automaticky hlídány z míst a 
pøechodù nebo zadat samostatný text. Tento samostatný text je zde kvùli 
nároènìj¹ím programùm a operacím, jako je napøíklad pole nebo seznam. Tento 
text v¹ak není nijak kontrolovaný, pøevá¾nì kvùli nároènosti na rozdìlení do 
tokenù a provedení analýzy tìchto tokenù. Pokud je potøeba dát najevo, ¾e hrana 
neobsahuje ¾ádná data, lze ji nechat prázdnou, popøípadì uvést \emph{null} 
nebo \emph{nill} do textového pole spoje.

\subsection{Provázání jednotlivých èástí}
Aplikace poskytuje jednoduché provázání a spojení èástí, které spolu souvisí -- 
jako je tomu napøíklad u diagramu pøípadù u¾ití a diagramu tøíd. Editace a 
vytvoøení objektu v jedné èásti vede k vyvolání akce v druhé. Toto chování je 
èásteènì zautomatizováno a tím ulehèena práce, nicménì u¾ivateli je ponechána 
volná ruka v tìchto ohledech, a pokud potøebuje zmìnit pøedgenerované èásti, 
nejsou mu kladeny ¾ádné pøeká¾ky. 

Aplikace pouze napomáhá vývoji a postupnému vytváøení urèitých èástí. Nemá za 
úkol být naprosto zautomatizována a vytváøet v¹e bez zásahù od u¾ivatele.

\chapter {Roz¹íøené mo¾nosti nástroje} \label{moznostiAplikace}
Bìhem vývoje aplikace bylo poèítáno s nìkterými roz¹íøeními a potøebnými 
úpravami editoru. Pøevá¾nì z toho dùvodu, aby aplikace byla snáze pou¾itelná a 
pøiná¹ela nové prvky. 

Øekneme si nìco o zpùsobech exportu aplikace a proè byl vybrán tento druh 
exportù \ref{exportDiagramu}. Dále si popí¹eme v kapitole \ref{grafickePrvky} 
popí¹eme, v èem je tento nástroj vylep¹ený po grafické stránce nìkterých 
ovládacích prvkù oproti konkurenci.

\section{Export diagramù} \label{exportDiagramu}
Jedním z po¾adavkù byl exportu do formátu \emph{XML}. Tohoto bylo vyu¾ito v 
pøípadì ukládání stavu aplikace, kdy otevøený projekt je mo¾né ulo¾it do formátu 
XML. Tento formát slou¾í pro ukládání a naèítání projektù. Formát XML 
byl zvolen èásteènì kvùli jeho mo¾nému upravení, kdy lze editovat obsah 
objektù bez nutnosti zapnutého nástroje. Toto se ale doporuèuje pouze zku¹eným 
u¾ivatelùm, proto¾e je mo¾né, ¾e se díky tomuto zásahu jakýmkoliv zpùsobem 
poru¹í editovaný soubor, který ji¾ nebude mo¾né opravit v tomto nástroji. Pro 
export do XML byla vyu¾ita speciální knihovna blí¾e popsána v kapitole 
\ref{xmlExport}.

Velice u¾iteèným roz¹íøením je dále mo¾nost vykreslit námi editované diagramy a 
sítì do formátu \emph{PostScript} (formát EPS). V tomto textu byly pou¾ity 
pøevá¾nì obrázky pocházející z výsledné aplikace. Editovaný projekt se ulo¾í do 
samostatné slo¾ky pod jeho jménem a v¹echny výstupy z editorù jsou ulo¾eny v 
této slo¾ce. Tato funkcionalita byla pøidána pomocí knihovny, kterou blí¾e 
popí¹eme v kapitole \ref{postScriptExport}.

\section{Grafické prvky}\label{grafickePrvky}
Pro práci s grafickými prvky na editaèním plátnì bylo pou¾ito rùzných technik.
Jedna byla aplikována pro detekci objektu pod ukazatelem a druhá pro nalezení 
hrany pod kurzorem.

\subsection{Detekce objektu pod kurzorem}
Zji¹tìní, zda se nachází nìjaký objekt pod kurzorem, bylo velice jednoduché. 
Ka¾dý objekt má výpoèet pro toto zji¹tìní. Tento zpùsob získání objektu byl 
zvolen pøevá¾nì kvùli jednoduchosti pøidání nového tvaru.

\begin{equation}\label{count:coords}
\begin{split}
isX = \lvert mouseX - objectX \rvert\\
isY = \lvert mouseY - objectY \rvert
\end{split}
\end{equation}
Kde \eqref{count:coords}:
\begin{itemize}
  \item \emph{ObjectX} a \emph{objectY} jsou souøadnice X a Y pro 
bod objektu.
  \item \emph{MouseX} a \emph{mouseY} urèují bod kurzoru.
  \item \emph{IsX} a \emph{isY} je vypoèítaná vzdálenost na osách X a Y.
\end{itemize}

Výpoèet je provádìn tak, ¾e se vypoèítá vzdálenost na osách mezi body a tato 
vzdálenost je provìøena, zda le¾í v daném objektu. Porovná se ¹íøka a vý¹ka 
oproti vypoèítaným vzdálenostem. Pokud bod kurzoru le¾í v tìchto hranicích, 
vykoná se pøíslu¹ná operace -- napøíklad zvýraznìní objektu.

Tento zpùsob je nároèný na pamìt, pøevá¾nì kvùli neustálému volání pøi 
jakémkoliv pohybu my¹i. Pro tento nástroj v¹ak toto omezení nemá vliv na výkon 
nebo celkový chod (pøevá¾nì díky jednoduchosti a rychlosti).

\subsection{Výpoèet vzdálenosti hrany od bodu}
Na druhou stranu zji¹tìní hrany pod kurzorem ji¾ je ponìkud nároènìj¹í, 
pøevá¾nì z toho dùvodu, ¾e hranu máme definovanou jako dvojici bodù. Výpoèet 
pro takové zji¹tìní je slo¾itìj¹í a mo¾ností pou¾ití rùzných vzorcù pro toto
zji¹tìní je mnoho.

Ve vyvíjeném nástroji jsou pou¾ity dvì metody zji¹tìní vzdálenosti bodu 
od pøímky. Jedna metoda je vyu¾ita pro výpoèet vzdálenosti kraje objektu k bodu 
a na základì toho je hrana zkrácena (pou¾ito pøevá¾nì pro vykreslení ¹ipky na 
konci hrany). Druhá metoda slou¾í pro výpoèet bodu kurzoru a úseèky mezi dvìma 
body.

\subsubsection{Výpoèet kraje objektu k bodu} \label{lineToobject}
Pøed samotným výpoètem prùseèíku okraje objektu a pøímky z nìj vycházející, je 
potøeba zjistit, v jakém sektoru se nachází druhý konec úseèky (støed druhého 
objektu). Pro zji¹tìní sektoru jsou pou¾ity úhlopøíèky objektu a to ve stylu, 
¾e do vzorcù pro úhlopøíèku dosadíme bod X, nebo bod Y a u výsledného bod 
provìøíme, zda le¾í pod nebo nad touto úhlopøíèkou. Pro výpoèet bodu lze 
pou¾ít jednu z rovnic \eqref{uhlopricka}.

\begin{subequations} \label{uhlopricka}
Výpoèet, zda se bod nachází pod, nad a nebo na úhlopøíèce:
\begin{align}
resultY &= \frac{YboduA - YboduB}{(XboduA - XboduB){(givenX-XboduA)}} + 
YboduA\\
resultX &= \frac{givenY - YboduA}{\frac{YboduA - YboduB}{XboduA - XboduB}} + 
XboduA
\end{align}
\end{subequations}
Kde pro \eqref{uhlopricka}:
\begin{itemize}
  \item \emph{ResultX} a \emph{resultY} je výsledná souøednice bodu X, nebo Y.
  \item \emph{XboduA} a \emph{YboduA} znamená souøednice prvního bodu 
úhlopøíèky.
  \item \emph{XboduB} a \emph{YboduB} urèuje souøadnice druhého bodu úhlopøíèky.
  \item \emph{GivenX} a \emph{givenY} jsou souøadnice X, nebo Y z daného bodu, 
zde je tento bod souøadnice støedu druhého objektu.
\end{itemize}

Pro samotný výpoèet bodu je pou¾ito shodnosti trojúhelníkù s tím, ¾e máme 
zadaný støed objektu, ke kterému se sna¾íme zjistit protínaný okraj a bod, 
odkud vychází tato úseèka. Proto je po vybrání sektoru zji¹tìn pomìr stran 
pomocí podìlení ¹íøky, nebo vý¹ky (zále¾í na sektoru) a vzdálenosti støedu 
objektu od bodu na ose X, nebo Y (opìt zále¾í na sektoru). Pøi zji¹tìném pomìru 
stran se dopoèítá druhá strana trojúhelníku a vynásobí se s tímto pomìrem.

\subsubsection{Výpoèet bodu kurzoru a úseèky} \label{pointToLine}
Výpoèet vzdálenosti kurzoru od úseèky je provádìn odli¹ným vzorcem. Pøi tomto 
výpoètu se nejdøíve urèí, zda se bod nachází v rozmezí dané pøímky (tedy 
jestli bod le¾í pod a nebo nad úseèkou). Pro urèení bodu vùèi pøímce byla 
pou¾ita rovnice \eqref{urceniPolohy}.

\begin{equation} \label{urceniPolohy}
h = \frac{(Px - Ax)(Bx - Ax) + (Py - Ay)(By - Ay)}{delkaUsecky}
\end{equation}

V momentì kdy, výsledné \emph{h} z rovnice \eqref{urceniPolohy} je v rozmezí 
$ 0<h<1 $, se bod nachází pod a nebo nad touto úseèkou (nikoliv za nebo pøed 
úseèkou). Lze tedy vypoèítat vzdálenost kurzoru od úseèky.

\begin{equation} \label{vypocetVzdalenosti}
\frac{(Bx - Ax)(Py - Ay) - (Ax - Px)(By - Ay)}{delkaUsecky}
\end{equation}

Pro rovnice \eqref{urceniPolohy} a  \eqref{vypocetVzdalenosti} platí:
\begin{itemize}
  \item \emph{Px} a \emph{Py} jsou souøadnice kurzoru.
  \item \emph{Ax} a \emph{Ay} reprezentují souøadnice bodu \emph{A} 
úseèky \emph{AB}.
  \item \emph{Bx} a \emph{By} slou¾í jako souøadnice bodu \emph{B} na 
úseèce \emph{AB}.
\end{itemize}

Vzorce pro výpoèet polohy bodu vùèi úseèce a pro finální výpoèet vzdálenosti 
tohoto bodu od úseèky byly pøevzaty z \cite{graphicGems2}.

\section{Pou¾ité knihovny a ikony} \label{pouziteKnihovny}
Pro zjednodu¹ení práce a mo¾nosti zamìøení se na dùle¾itìj¹í èásti nástroje 
bylo pou¾ito nìkolik knihoven pro urychlení vývoje. Tyto knihovny jsou volnì ke 
sta¾ení s pøehlednou dokumentací. Jejich pou¾ití je jednoduché a rychlé. 
Aplikování tìchto knihoven vedlo k urychlení vývoje dùle¾itých koponent, 
nicménì tyto knihovny nejsou nutností pro výslednou aplikaci. Pokud by se ov¹em 
odtranily, bylo by nutné tyto knihovny nahradit vlastní implemtnací tìchto 
funkcí.

\subsection{XML export} \label{xmlExport}
V pøípadì expotu do XML bylo zvoleno ukládání ve¹kerých grafù do speciální 
struktury, kterou lze jednodu¹e pøedat knihovnì s názvem \emph{XStream} 
\footnote{Domovskou adresu pro tuto knihovnu lze nalézt 
na adrese: \url{http://xstream.codehaus.org/}.}. Tato knihovna se postará o 
bezproblémovou serializaci a deserializaci objektu do a z XML.

Výhodou této knihovny je jednoduchost pou¾ití jak pøi serializaci, tak 
deserializaci. V pøípadì naètení souboru je práce s touto knihovnou je¹tì 
sna¾¹í. Dal¹í výhodou knihovny je mo¾nost nastavit aliasy pro XML tagy, tak¾e 
je mo¾né upravit XML soubor, který bude pou¾ívaný v tomto nástroji pro dal¹í 
potøeby. Pokud napøíklad bude nutné soubory exportované tímto nástrojem 
upravit v dal¹í aplikaci, která doká¾e èíst a vytváøet XML soubory, je mo¾né 
zmìniz vstup a výstup této knihovny tak, ¾e nebude potøeba upravovat naèítání 
a práci s tìmito soubory v jiné aplikaci.

Pou¾itím této knihovny bylo docíleno bezchybného, rychlého a jednoduchého 
vytvoøení souboru pro ukládání editovaného projektu.

\subsection{PostScript export}\label{postScriptExport}
Export do souboru PostScript nebyl nutností pro tuto aplikaci, ale bylo 
zvoleno, ¾e export do tohoto formátu bude velice u¾iteèný a nástroj tím získá 
silnou funcionalitu.

Pro export do formátu EPS bylo vyzkou¹eno nìkolik nástrojù, ¾ádný z nich ov¹em 
nebyl tak jednoduchý na pou¾ití a nepodporoval tolik funkcí jako tomu bylo 
u nástroje \emph{EPS Graphics} \footnote{Dokumentaci a knihovnu samotnou lze 
najít na adrese: \url{http://www.abeel.be/epsgraphics/}.}.

Tento nástroj vyènívá nad konkurencí pøevá¾nì v mno¾ství implementovaných 
funkcí. Byl vybrán pøevá¾nì kvùli tomu, ¾e ve¹kerá grafika je tisknuta pomocí 
\emph{Graphics2D} a tato knihovna podporuje vìt¹inu funkcí, které jsou 
pou¾ívány právì v \emph{Graphics2D}. \footnote{Pro bli¾¹í obeznámení 
implementovaných funkcí je mo¾né nahlédnout do rozsáhlé API dokumentace na 
stránce: \url{http://epsgraphics.sourceforge.net/api/1.2/doc/}.}

V celém tomto dokumentu byly pou¾ity obrázky, které byly exportovány pomocí 
této knihovny, umo¾òující velice rychlé a u¾iteèné roz¹íøení tohoto nástroje.

\subsection{Pou¾ité ikony}
V aplikaci bylo pou¾ito nìkolika ikon pro zpøehlednìní a odlehèení monotónnosti 
designu. Pøidáním tìchto ikon bylo umo¾nìno i ménì zruèným u¾ivatelùm jednodu¹e 
pou¾ívat a osvojit si práci s tímto nástrojem.

Ikony byly vybrány z galerie Open Icon Library\footnote{Adresa této galerie 
je: \url{http://openiconlibrary.sourceforge.net/}.}, tyto ikony jsou volnì ke 
sta¾ení, a pokud tento nástroj nebude vyu¾íván pro úèely zisku, nemìl by být 
¾ádný problém s licencemi.

\chapter{U¾ivatelské testování} \label{testyAvysledky}
Zámìrem této kapitoly je pøedvést výsledky u¾ivatelského testování. Budou zde
pøedstaveny návrhy od mo¾ných zákazníkù a potencionálních u¾ivatelù tohoto 
nástroje.

\section{Nezku¹ený u¾ivatel}
Nátroj byl pøedstaven nejdøíve u¾ivateli, který nemá ¾ádné zku¹enosti s 
vytváøením programù, ani nikdy nebyl zapojen do vývoje programu. Tento test má 
dokázat, zda je nástroj pou¾itelný a nemá nìkterou chybu znemo¾òující práci s 
tímto nástrojem.

\subsection{Prùbìh pøedstavení}
Nezku¹enému u¾ivateli bylo dáno za úkol vymyslet program, který by mu pomáhal 
pøi práci. Tento program byl poté pøedstaven a popsán programátorovi. Pøi tomto 
testu nebyla nalezena ¾ádná chyba a nedostatek. U¾ivatel byl spokojený s 
rychlostí, s jakou se výsledný program rýsoval. Pøevá¾nì kvùli tomu, ¾e si mohl 
okam¾itì vybavit vìci, které ji¾ byly nachystány a které bude potøeba vymyslet.

V tomto pøípadì byl nástroj byl tedy velice pøínosný a bylo mo¾né postoupit k 
pøedání nástroje více zku¹enému u¾ivateli.

\section{Zku¹enìj¹í u¾ivatel}
Tento u¾ivatel ji¾ pou¾il diagram pøípadù u¾ití a rozumí návrhu aplikace. Bylo 
po nìm po¾adováno, aby pøedvedl, zda by zvládl v této aplikaci pøedstavit svoji 
vizi programátorovi a zda aplikaci neschází nìkterý nutný prvek potøebný pro 
jednoduché ovládání.

\subsection{Prùbìh a výsledky u¾ivatelské práce}
Pøi sledování práce u¾ivatele bylo zji¹»ìno, ¾e jeho uèební køivka je velice 
strmá. To znamená, ¾e návrh aplikace byl velice dobrý a u¾ivatel si rychle 
zvykl na práci a po chvilce zkou¹ení nástroje byl schopný vytvoøit vlastní 
diagram pøípadù u¾ití.

Bìhem tvoøení tohoto diagramu bylo ov¹em zji¹»ìno, ¾e aplikaci schází mo¾nost 
okam¾itého zru¹ení pøidávání nových objektù na editaèní plátno. Tento návrh byl 
tedy poznamenán a pozdìji implementován.

U¾ivatel nemìl ¾ádnou dal¹í výtku k nástroji kromì po¾adavku na vytvoøení 
nápovìdy a jednoduchého popsání jednotlivých èástí nástroje, co¾ by mìlo být 
buï v nápovìdì nebo v u¾ivatelské pøíruèce.

\section{Programátor}
V poslední èásti byl nástroj pøedstaven programátorovi, kterému bylo navrhnuto, 
aby vytvoøil jednoduchý program. Vytvoøil diagram pøípadù u¾ití, poté pøidal 
pár roz¹iøujích metod a tyto metody popsal pomocí objektovì orientovaných 
Petriho sítí. Pøevá¾nì bylo sledováno, zda nechybí nìkterá dùle¾itá funkce a 
není pøíli¹ omezovaný a jestli není potøeba pøíli¹ pøedstavovat tento nástroj.

\subsection{Prùbìh testování}
Tento u¾ivatel rychle pochopil základní ovládací prvky nástroje, ocenil rùzné 
mo¾nosti otevírání a zavírání jednotlivých projektù. Kladnì také zhodnotil 
provázání mezi diagramem pøípadù u¾ití a diagramem tøíd. Po vysvìtlení, jak 
spojit rùzné objekty napøíè diagramy, byl s touto funkcí spokojený.

Po pøedstavení, jak fungují objektovì orientované Petriho sítì, ocenil 
jednochusot a rychlost vytváøení jednotlivých èástí aplikace a také svi¾nost 
popisu metod pomocí Petriho sítí.

\subsection{Vyhodnocení programátorovy práce}
U¾ivatel byl s nástrojem spokojený a ocenil by dal¹í roz¹íøení v podobì exportu 
do zdrojových kódù nebo simulace Petriho sítí.

\section{Výsledky testování}
Po otestování tøemi rùznými u¾ivateli bylo objeveno nìkolik chyb -- napøíklad v 
podobì okam¾itého zru¹ení pøidávaných objektù a jejich spojování. Jinak 
byli u¾ivatelé spokojeni s jednoduchostí a snadným ovládáním nástroje, co¾ 
znamená splnìní po¾adované podmínky na intuitivnost a snadnost pou¾ití i pøi 
automatickém generování -- jak bylo specifikováno v úvodu této práce.

\chapter{Závìr} \label{zaver}
V této kapitole se budeme postupnì vìnovat navrhovaným mo¾ným roz¹íøením, 
kterým by bylo vhodné tento nástroj vylep¹it. Poté shrneme vytvoøený nástroj, 
jeho pøínos a aktuální stav. Také popí¹eme nìkteré známé chyby nebo nedostatky.

\section{Budoucnost aplikace} \label{budoucnost}
Tato kapitola pøedstavuje navrhované roz¹íøení pro vytvoøený nástroj. Nástroj 
je bez tìchto roz¹íøení funkèní, nicménì pøidání dal¹ích funkcí a mo¾ností by 
z tohoto nástroje udìlalo pravdìpodobnì robustní nástroj.

Roz¹íøení zde navrhnutá není nutné dodr¾et pøi dal¹í implementaci a pøidávání 
funkcí a vylep¹ení do tohoto nástroje. Nicménì jsou logicky vybrány a z 
pohledu momentálního stavu aplikace by znamenaly velmi mnoho. Do nástroje je 
samozøejmì mo¾né pøidat mnoho dal¹ích funkcí.

\subsubsection{Historie akcí}
Jak ji¾ bylo zmínìno v pøede¹lých kapitolách, jistì by se hodilo ukládat 
postupný chod akcí, pøes které by bylo mo¾né postupnì kolovat, jak dozadu, tak 
dopøedu, co¾ by vedlo ke sna¾¹í editaci a pohodlnìj¹í práci s aplikací. Absence 
této funkce momentálnì neznamená nepou¾itelnost aplikace, pouze ji dìlá mírnì 
tì¾kopádnou. Toto roz¹íøení je nyní pova¾ováno za nejdùle¾itìj¹í a pøi dal¹ím 
roz¹íøení nástroje by bylo vhodné tuto úpravu implementovat jako první.

\subsubsection{Grafický design a editace designu}
Grafický design a momentální vzhled nástroje není ¹patný, nebo nikterak 
nepou¾itelný, je pouze jednoduchý a velice monotónní. Z tohoto dùvodu by 
bylo vhodné pøidat mo¾nost zmìny vzhledu aplikace, a» u¾ nastavením 
u¾ivatelského rozhraní, nebo celkového vzhled objektù na editaèním plátnì. 
Aplikace by díky tomuto roz¹íøení byla více pøívìtivìj¹í k u¾ivateli.

\subsubsection{Mo¾nost exportu Petriho sítì} \label{PNtalk}
Pro lep¹í komunikaci mezi tímto nástrojem a nástroji, které se soustøedují 
napøíklad na interpretaci Petriho sítí, by bylo u¾iteèné, kdyby nástroj 
mohl objektovì orientované Petriho sítì exportovat do specifického formátu, 
jako napøíklad \emph{PNTalk} \footnote{Bli¾¹í informace o tomto jazyku a o 
projektu PNTalk lze nalést na stránkách 
\url{http://perchta.fit.vutbr.cz/pntalk2k}.}.

\subsubsection{Simulace Petriho sítí}
Pokud by se vyu¾ilo pøede¹lého roz¹íøení (mo¾nost exportu Petriho sítì) a 
propojení s dal¹ím nástrojem, který by se staral o simulaci Petriho sítí 
vytvoøených v tomto nástroji, znamenalo by to znaèné urychlení vývoje aplikací. 
Kdyby se od zákazníka pøevzaly vstupy a výstupy pro testovací pøípady a ty by 
se porovnaly s výstupem z tohoto simulátoru, znamenalo by to velice rychlé 
zji¹tìní chyb, na základì kterých by se dala upravit Petriho sí».

\subsubsection{Vytvoøení zdrojových kódù z diagramù a Petriho sítí} 
\label{sourceCode}
Po vzoru konkurentních nástrojù Umbrello \ref{umbrello} a Enterprise Architektu 
\ref{enterpriseArchitect} by bylo velice u¾iteèné mít mo¾nost vytvoøit zdrojové 
kódy pro zvolený jazyk z vytvoøených Diagramù. Po zapojení Objektovì 
orientovancýh sítí do tohoto exportu by znamenalo vytvoøení plnì funkèní 
aplikace. Díky tomuto zaøízení by tento nástroj byl velice silnou konkurencí 
pro komerèní i nekomerèní nástroje. Oproti konkurenci má tento nástroj ji¾ 
velikou výhodu v podobì Objektovì orientovaných Petriho sítí a jednoduchých 
editorù.

\subsubsection{Shrnutí roz¹íøení}
Bylo navrhnuto a objeveno mnoho mo¾ností, jak tento nástroj roz¹íøit a udìlat 
tak z nìj velice silný nástroj na poli UML editorù. V pøípadì postupné 
implementace navrhovaných roz¹íøení by po dosa¾ení \textbf{Vytvoøení zdrojových 
kódù z diagramù a Petriho sítí} by z tohoto jednoduchého 
editoru vytvoøilo velice silnou konkurenci pro nástroje jako \textbf{Umbrello}, 
\textbf{Enterprise Architect}, \textbf{Dia} a mnohých dal¹ích.

\section{Závìreèné zhodnocení aplikace}
Bez ohledu na roz¹íøení probrané v pøede¹lé kapitole \ref{budoucnost} je 
aplikace velice dobøe pou¾itelná a vhodná pro vytvoøení návrhu vývoje.

Tento nástroj má veliké výhody oproti konkurenci pøevá¾nì díky jednoduchému a 
snadnému ovládání. Minimum nástrojù na trhu momentálnì nabízí spojení diagramu 
pøípadù u¾ití s diagramem tøíd. Nástroje, které toto umo¾òují v¹ak nemají 
mo¾nost popsat tøídy pomocí objektov orientovaných Petriho sítí. Tento zpùsob 
popisu chování tøídy a popisu reakcí na odchycené zprávy je unikátní pøevá¾nì 
díky rychlosti jakou lze takovou tøídu, nebo metodu popsat.

Tento nástroj pøevá¾nì získává oproti dal¹ím nástroj díky provázanosti 
jednoduché úpravì v èásti UML. Kdy je mo¾né vytvoøit tøídu, tu popsat a 
kompletnì vytvoøit a v momentì, kdy je potøeba tuto tøídu pou¾ít jinak, jako 
napøíklad odli¹ný pøípad u¾ití, tento nástroj tuto zmìnu doká¾e provést takøka 
okam¾itì. Takovýto pohled na vytváøení tøíd a provázání s akcemi je velice 
dobrý v pøípadì zapojení agilních metodik vývoje. Je mo¾né vytvoøit tøídy a 
o jejich pou¾ití se postará zákazník, který nemusí být zku¹ený v programování, 
pouze rozumnìt diagramu pøípadù u¾ití.

Z testù a práce u¾ivatelù s tímto nástrojem \ref{testyAvysledky} vyplývá ¾e 
nástroj je velice jednoduchý na pou¾ívání a snadno pochopitelný. S tímto 
zámìrem byla tato aplikace od zaèátku vyvýjena a tento úkol také splòuje. 

Aplikace má nìkteré nedostatky v podobì nemo¾nosti vrátit zpìt provedenou akci, 
nebo neidentifikaci zda byl program ulo¾en. Tyto nedostatky ov¹em nejsou 
limitující a neomezují u¾ivatele v pou¾ívání aplikace.

Velice pøínosná je mo¾nost dal¹ího roz¹íøení tohoto nástroje o nìkolik dal¹ích 
funkcí. V pøípadì vytvoøení navrhovaných roz¹íøení v kapitole
\ref{budoucnost} je mo¾né z tohoto nástroje udìlat silného soupeøe na 
poli editorù. Nad kterými aplikace ji¾ momentálnì vítìzí díky mo¾nosti popsání 
metod a tøíd pomocí objektovì orientovanou Petriho sítí.
%=========================================================================
